/*! orb-utilities 27-12-2014 */
var orb=orb||{};orb.Core=function(a){this.layers=[],this.overlays=[],this._renderer=new THREE.WebGlRenderer(a),this._scene=new THREE.Scene,this._camera=new THREE.PerspectiveCamera},orb.Core.prototype={constructor:orb.Core,setDate:function(a){return a instanceof Date&&(this._date=a),this},getDate:function(){return void 0===this._date,Date.now()},start:function(){},stop:function(){},render:function(){requestAnimcationFrame(render),this._renderer.render(this._scene,this._camera)}};var orb=orb||{};orb.AtmosphericLayer=function(){},orb.AtmosphericLayer.prototype=Object.create(orb.Layer.prototype),orb.AtmosphericInLayer=function(){},orb.AtmosphericOutLayer=function(){},orb.FieldLayer=function(){this.lifespan=1,this.density=1e4,this.resolution=10,this.buffer=new Float32Array(this.density*this.resolution),this.geometry=new THREE.BufferedGeometry;this.geometry.attributes},orb.FieldLayer.prototype={constructor:orb.FieldLayer,update:function(){},randomPoint:function(){var a=Math.random(),b=Math.random(),c=2*Math.PI*a,d=Math.acos(2*b-1);return THREE.Vector3(Math.sin(c)*Math.cos(d),Math.sin(c)*Math.sin(d),Math.cos(c))}},orb.GeometryLayer=function(){},orb.GeometryLayer.prototype={},orb.Layer=function(){},orb.Layer.prototype={constructor:orb.Layer},orb.Coordiate=function(a,b){this.lat=a||0,this.lng=b||0},orb.Coordiate.prototype={constructor:orb.Coordiate,set:function(a,b){this.lat=a,this.lng=b},copy:function(a){this.lng=a.lng,this.lat=a.lat},fromArray:function(a){this.lat=a[0],this.lng=a[1]},toVector3:function(a){var a=a||6371,b=this.lat*(Math.PI/180),c=-this.lng*(Math.PI/180);return new THREE.Vector3(a*Math.cos(c)*Math.cos(b),a*Math.sin(b),a*Math.sin(c)*Math.cos(b))},toString:function(){return this.lat+", "+this.lng}},orb.Coordiate.Ecliptic=function(){this.origin=orb.galactic.Anchor.Common.Sun,this.primary="J2000.0"},orb.Coordinate.Galactic=function(a,b){this.b=a||0,this.l=b||0},orb.Geo=function(a,b){this.latitude=a||0,this.longitude=b||0},orb.Geo.prototype={constructor:ORG.Geo,set:function(a,b){return this.latitude=a,this.longitude=b,this},setLatitude:function(a){return this.latitude=a,this},setLongitude:function(a){return this.longitude=a,this},copy:function(a){return this.latitude=a.latitude,this.longitude=a.longitude,this},equals:function(a){return this.latitude===a.latitude&&this.longitude===a.longitude},fromArray:function(a){return this.latitude=a[0],this.longitude=a[1],this},toArray:function(){return[this.latitude,this.longitude]},clone:function(){return new orb.Geo(this.latitude,this.longitude)}},orb.Sphere=function(a,b){this.origin=a,this.radius=b},orb.Ray=function(a){this.origin=a,this.direction=radius},orb.intersects=function(a,b){var c=a.radius,d=a.origin,e=b.origin,f=b.origin+b.direction,g=f.sub(e),h=e.sub(d),i=g.dot(g),j=2*g.dot(h),k=h.dot(h)-c*c,l=j*j-4*i*k;return l>=0},orb.Region=function(){this.positive=[],this.negative=[],this.computeBounds()},orb.Region.prototype={constructor:orb.Region,computeBounds:function(){this.bounds={};var a=this.bounds.minimum=new THREE.Vector2(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),b=this.bounds.maximum=new THREE.Vector2(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);this.positive.forEach(function(c){c.forEach(function(c){a.x=Math.min(a.x,c.x),a.y=Math.min(a.y,c.y),b.x=Math.max(b.x,c.x),b.y=Math.max(b.y,c.y)})})}},orb.Partition=function(){this.points=[],this.regions=[]},orb.Partition.prototype={constructor:orb.Partition,add:function(a){a.origin;return this},remove:function(){return this},nearest:function(){return[]}},orb.Unit=function(a,b){this.value=a||0,this.unit=b||""},orb.Unit.prototype={constructor:orb.Unit,convert:function(){},normalize:function(){var a=orb.Unit.Conversions[unit];void 0!=a&&(this.value=this.value*a.ratio,this.unit=a.si)},toString:function(){return value.toExponential+this.unit}},orb.Unit.Conversions={m:{name:"Meter",si:"m",ratio:1},pc:{name:"Parsec",si:"m",ratio:308567758e8},au:{name:"Astronomical Unit",si:"m",ratio:308567758e8},ly:{name:"Light-year",si:"m",ratio:308567758e8}},orb.Unit.Prefix={Y:1e24,Z:1e21,E:1e18,P:1e15,T:1e12,G:1e9,M:1e6,k:1e3,m:.001,u:1e-6,n:1e-9,p:1e-12,f:1e-15,a:1e-18,z:1e-21,y:1e-24,detect:function(a){var b={base:a,prefix:"",ratio:1};if(a.length>1){var c=a.substr(1),d=a.substr(0,1),e=orb.Unit.Prefix[d];void 0!==orb.Unit.Conversions[c]&&void 0!==e&&(b.base=c,b.prefix=d,b.ratio=e)}return b}},orb.Vector3=THREE.Vector3,orb.Vector3.prototype=THREE.Vector3.prototype,orb.Node=function(){this._id=orb.NodeIdCount++,this._uuid="",this._name="",this.parent=void 0,this.children=[],this._attributes={},this._data={}},orb.Node.prototype={attribute:function(a,b){return void 0!==b?(this._attributes[a]=b,this.dispatchEvent({type:"attribute"}),this):this._attributes[a]},add:function(a){a!==this&&a instanceof orb.Node&&(void 0!==a.parent&&a.parent.remove(a),this.children.push(a))},remove:function(){},traverse:function(){}},orb.NodeIdCount=0,NodeGroup.js;